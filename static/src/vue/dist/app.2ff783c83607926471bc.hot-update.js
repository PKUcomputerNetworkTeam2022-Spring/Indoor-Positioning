webpackHotUpdate("app",{

/***/ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/Scatterplot.vue?vue&type=script&lang=js&":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/Scatterplot.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.filter */ \"./node_modules/core-js/modules/es.array.filter.js\");\n/* harmony import */ var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string */ \"./node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! regenerator-runtime/runtime */ \"./node_modules/regenerator-runtime/runtime.js\");\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _BaseComp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./BaseComp */ \"./src/components/BaseComp.vue\");\n/* harmony import */ var vega_embed__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! vega-embed */ \"./node_modules/vega-embed/build/vega-embed.module.js\");\n\n\n\n\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      view: null\n    };\n  },\n  computed: {\n    vegaSpec: function vegaSpec() {\n      return {\n        data: {\n          values: this.data\n        },\n        selection: {\n          brush: {\n            type: \"interval\"\n          },\n          multi: {\n            type: \"multi\"\n          }\n        },\n        mark: 'point',\n        encoding: {\n          x: {\n            field: this.encoding.x,\n            type: 'quantitative',\n            scale: {\n              domain: [0, 7]\n            }\n          },\n          y: {\n            field: this.encoding.y,\n            type: 'quantitative',\n            scale: {\n              domain: [0, 11]\n            }\n          },\n          color: {\n            condition: {\n              selection: \"brush\",\n              value: \"blue\"\n            },\n            value: \"grey\"\n          },\n          size: {\n            value: 50\n          }\n        },\n        width: 400,\n        height: 400\n      };\n    }\n  },\n  props: ['id', 'data', 'selection', 'encoding'],\n  watch: {\n    vegaSpec: function vegaSpec(value) {\n      return regeneratorRuntime.async(function vegaSpec$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return regeneratorRuntime.awrap(this.embedVegaSpec(this.value));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    },\n    selection: function selection(value) {\n      // 计算brush range\n      var range;\n      if (value.length === 0) range = [[0, 0], [0, 0]];else {\n        var xMin = lodash__WEBPACK_IMPORTED_MODULE_4___default.a.minBy(value, this.encoding.x)[this.encoding.x];\n\n        var xMax = lodash__WEBPACK_IMPORTED_MODULE_4___default.a.maxBy(value, this.encoding.x)[this.encoding.x];\n\n        var yMin = lodash__WEBPACK_IMPORTED_MODULE_4___default.a.minBy(value, this.encoding.y)[this.encoding.y];\n\n        var yMax = lodash__WEBPACK_IMPORTED_MODULE_4___default.a.maxBy(value, this.encoding.y)[this.encoding.y]; // 和通常range模型不一样\n\n\n        range = [[xMin, xMax], [yMax, yMin]];\n      } // 不会立即更新\n      // TODO: bug, interval范围可能包含别的点，得用multi处理才行\n\n      this.view.data('brush_store', [{\n        fields: [{\n          channel: 'x',\n          field: this.encoding.x,\n          type: 'R'\n        }, {\n          channel: 'y',\n          field: this.encoding.y,\n          type: 'R'\n        }],\n        unit: '',\n        values: range\n      }]); // 触发更新\n\n      this.view.runAsync();\n    }\n  },\n  // 初始化\n  mounted: function mounted() {\n    return regeneratorRuntime.async(function mounted$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return regeneratorRuntime.awrap(this.embedVegaSpec(this.vegaSpec));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, this);\n  },\n  methods: {\n    embedVegaSpec: function embedVegaSpec(spec) {\n      var _this = this;\n\n      var view;\n      return regeneratorRuntime.async(function embedVegaSpec$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return regeneratorRuntime.awrap(Object(vega_embed__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(\"#\".concat(this.id), spec, {\n                renderer: 'svg'\n              }));\n\n            case 2:\n              view = _context3.sent.view;\n              // 监听数据变化\n              view.addDataListener('brush_store', function (name, value) {\n                var brushRange = [[value[0].values[0][0], value[0].values[0][1]], [value[0].values[1][1], value[0].values[1][0]]];\n\n                var selectedPts = _this.data.filter(function (v) {\n                  var x = v[_this.encoding.x];\n                  var y = v[_this.encoding.y];\n                  var inRange = x >= brushRange[0][0] && x <= brushRange[0][1] && y >= brushRange[1][0] && y <= brushRange[1][1];\n                  return inRange;\n                });\n\n                _this.$emit('brush', selectedPts);\n              });\n              this.view = view;\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  },\n  components: {\n    Base: _BaseComp__WEBPACK_IMPORTED_MODULE_5__[\"default\"]\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPyEuL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8hLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/IS4vc3JjL2NvbXBvbmVudHMvU2NhdHRlcnBsb3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9TY2F0dGVycGxvdC52dWU/ZDZlNyJdLCJzb3VyY2VzQ29udGVudCI6WyI8dGVtcGxhdGU+XHJcbiAgPEJhc2U+XHJcbiAgICA8ZGl2IDppZD1cImlkXCI+PC9kaXY+XHJcbiAgPC9CYXNlPlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdD5cclxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xyXG5pbXBvcnQgQmFzZSBmcm9tICcuL0Jhc2VDb21wJ1xyXG5pbXBvcnQgZW1iZWQgZnJvbSAndmVnYS1lbWJlZCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBkYXRhKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmlldzogbnVsbCxcclxuICAgIH1cclxuICB9LFxyXG4gIGNvbXB1dGVkOiB7XHJcbiAgICB2ZWdhU3BlYygpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiB7IHZhbHVlczogdGhpcy5kYXRhfSxcclxuICAgICAgICBzZWxlY3Rpb246IHsgXHJcbiAgICAgICAgICBicnVzaDogeyB0eXBlOiBcImludGVydmFsXCIgfSxcclxuICAgICAgICAgIG11bHRpOiB7IHR5cGU6IFwibXVsdGlcIiB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtYXJrOiAncG9pbnQnLFxyXG4gICAgICAgIGVuY29kaW5nOiB7XHJcbiAgICAgICAgICB4OiB7IGZpZWxkOiB0aGlzLmVuY29kaW5nLngsIHR5cGU6ICdxdWFudGl0YXRpdmUnLCBzY2FsZTogeyBkb21haW46IFswLCA3XSB9IH0sXHJcbiAgICAgICAgICB5OiB7IGZpZWxkOiB0aGlzLmVuY29kaW5nLnksIHR5cGU6ICdxdWFudGl0YXRpdmUnLCBzY2FsZTogeyBkb21haW46IFswLCAxMV0gfSB9LFxyXG4gICAgICAgICAgY29sb3I6IHtcclxuICAgICAgICAgICAgY29uZGl0aW9uOiB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0aW9uOiBcImJydXNoXCIsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IFwiYmx1ZVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHZhbHVlOiBcImdyZXlcIlxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNpemU6IHtcclxuICAgICAgICAgICAgdmFsdWU6IDUwXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd2lkdGg6IDQwMCxcclxuICAgICAgICBoZWlnaHQ6IDQwMFxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgcHJvcHM6IFsnaWQnLCAnZGF0YScsICdzZWxlY3Rpb24nLCAnZW5jb2RpbmcnXSxcclxuICB3YXRjaDoge1xyXG4gICAgYXN5bmMgdmVnYVNwZWModmFsdWUpIHtcclxuICAgICAgYXdhaXQgdGhpcy5lbWJlZFZlZ2FTcGVjKHRoaXMudmFsdWUpXHJcbiAgICB9LFxyXG4gICAgc2VsZWN0aW9uKHZhbHVlKSB7XHJcbiAgICAgIC8vIOiuoeeul2JydXNoIHJhbmdlXHJcbiAgICAgIGxldCByYW5nZVxyXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSByYW5nZSA9IFtbMCwgMF0sIFswLCAwXV1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgeE1pbiA9IF8ubWluQnkodmFsdWUsIHRoaXMuZW5jb2RpbmcueClbdGhpcy5lbmNvZGluZy54XVxyXG4gICAgICAgIGNvbnN0IHhNYXggPSBfLm1heEJ5KHZhbHVlLCB0aGlzLmVuY29kaW5nLngpW3RoaXMuZW5jb2RpbmcueF1cclxuICAgICAgICBjb25zdCB5TWluID0gXy5taW5CeSh2YWx1ZSwgdGhpcy5lbmNvZGluZy55KVt0aGlzLmVuY29kaW5nLnldXHJcbiAgICAgICAgY29uc3QgeU1heCA9IF8ubWF4QnkodmFsdWUsIHRoaXMuZW5jb2RpbmcueSlbdGhpcy5lbmNvZGluZy55XVxyXG4gICAgICAgIC8vIOWSjOmAmuW4uHJhbmdl5qih5Z6L5LiN5LiA5qC3XHJcbiAgICAgICAgcmFuZ2UgPSBbW3hNaW4sIHhNYXhdLCBbeU1heCwgeU1pbl1dXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOS4jeS8mueri+WNs+abtOaWsFxyXG4gICAgICAvLyBUT0RPOiBidWcsIGludGVydmFs6IyD5Zu05Y+v6IO95YyF5ZCr5Yir55qE54K577yM5b6X55SobXVsdGnlpITnkIbmiY3ooYxcclxuICAgICAgdGhpcy52aWV3LmRhdGEoJ2JydXNoX3N0b3JlJywgW3tcclxuICAgICAgICBmaWVsZHM6IFtcclxuICAgICAgICAgIHsgY2hhbm5lbDogJ3gnLCBmaWVsZDogdGhpcy5lbmNvZGluZy54LCB0eXBlOiAnUicgfSxcclxuICAgICAgICAgIHsgY2hhbm5lbDogJ3knLCBmaWVsZDogdGhpcy5lbmNvZGluZy55LCB0eXBlOiAnUicgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdW5pdDogJycsXHJcbiAgICAgICAgdmFsdWVzOiByYW5nZVxyXG4gICAgICB9XSlcclxuICAgICAgLy8g6Kem5Y+R5pu05pawXHJcbiAgICAgIHRoaXMudmlldy5ydW5Bc3luYygpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvLyDliJ3lp4vljJZcclxuICBhc3luYyBtb3VudGVkKCkge1xyXG4gICAgYXdhaXQgdGhpcy5lbWJlZFZlZ2FTcGVjKHRoaXMudmVnYVNwZWMpXHJcbiAgfSxcclxuICBtZXRob2RzOiB7XHJcbiAgICBhc3luYyBlbWJlZFZlZ2FTcGVjKHNwZWMpIHtcclxuICAgICAgY29uc3QgdmlldyA9IChhd2FpdCBlbWJlZChgIyR7dGhpcy5pZH1gLCBzcGVjLCB7cmVuZGVyZXI6ICdzdmcnfSkpLnZpZXdcclxuICAgICAgLy8g55uR5ZCs5pWw5o2u5Y+Y5YyWXHJcbiAgICAgIHZpZXcuYWRkRGF0YUxpc3RlbmVyKCdicnVzaF9zdG9yZScsIChuYW1lLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJydXNoUmFuZ2UgPSBbXHJcbiAgICAgICAgICBbdmFsdWVbMF0udmFsdWVzWzBdWzBdLCB2YWx1ZVswXS52YWx1ZXNbMF1bMV1dLCBcclxuICAgICAgICAgIFt2YWx1ZVswXS52YWx1ZXNbMV1bMV0sIHZhbHVlWzBdLnZhbHVlc1sxXVswXV1cclxuICAgICAgICBdXHJcblxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUHRzID0gdGhpcy5kYXRhLmZpbHRlcih2ID0+IHtcclxuICAgICAgICAgIGNvbnN0IHggPSB2W3RoaXMuZW5jb2RpbmcueF1cclxuICAgICAgICAgIGNvbnN0IHkgPSB2W3RoaXMuZW5jb2RpbmcueV1cclxuICAgICAgICAgIGNvbnN0IGluUmFuZ2UgPSB4ID49IGJydXNoUmFuZ2VbMF1bMF0gXHJcbiAgICAgICAgICAgICYmIHggPD0gYnJ1c2hSYW5nZVswXVsxXSBcclxuICAgICAgICAgICAgJiYgeSA+PSBicnVzaFJhbmdlWzFdWzBdIFxyXG4gICAgICAgICAgICAmJiB5IDw9IGJydXNoUmFuZ2VbMV1bMV1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIGluUmFuZ2VcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLiRlbWl0KCdicnVzaCcsIHNlbGVjdGVkUHRzKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgdGhpcy52aWV3ID0gdmlld1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY29tcG9uZW50czoge1xyXG4gICAgQmFzZVxyXG4gIH1cclxufVxyXG48L3NjcmlwdD5cclxuXHJcbjxzdHlsZT5cclxuLmJveCB7XHJcbiAgd2lkdGg6IDUwMHB4O1xyXG4gIGhlaWdodDogNTAwcHg7XHJcbn1cclxuPC9zdHlsZT4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTEE7QUFPQTtBQUNBO0FBREE7QUFWQTtBQWNBO0FBQ0E7QUF0QkE7QUF3QkE7QUExQkE7QUE0QkE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFOQTtBQUNBO0FBUUE7QUFDQTtBQTdCQTtBQStCQTtBQUNBO0FBbkVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFzRUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUhBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUF6QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTJCQTtBQUNBO0FBREE7QUFqR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/components/Scatterplot.vue?vue&type=script&lang=js&\n");

/***/ })

})